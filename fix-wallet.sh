#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –∫–æ—à–µ–ª—å–∫–∞
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç Prisma Client –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

echo "üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∫–æ—à–µ–ª—å–∫–∞..."
echo ""

cd "$(dirname "$0")"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ node_modules
if [ ! -d "node_modules" ]; then
    echo "‚ùå node_modules –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm install"
    exit 1
fi

# –®–∞–≥ 1: –û–±–Ω–æ–≤–ª—è–µ–º Prisma Client
echo "üì¶ –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Prisma Client..."
if [ -f "node_modules/.bin/prisma" ]; then
    ./node_modules/.bin/prisma generate
    if [ $? -eq 0 ]; then
        echo "‚úÖ Prisma Client —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!"
    else
        echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ Prisma Client"
        echo "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é: npm run prisma:generate"
        exit 1
    fi
else
    echo "‚ùå Prisma CLI –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ node_modules"
    echo "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ: npm install"
    exit 1
fi

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:"
echo "   1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)"
echo "   2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: npm run dev"
echo ""
echo "–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ—à–µ–ª–µ–∫ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å!"


