# Исправление ошибки кошелька (500 Internal Server Error)

## Проблема
Сервер возвращает ошибку 500 при попытке загрузить кошелек. Это происходит потому, что Prisma Client не знает о новой модели `Wallet`.

## Решение

### Шаг 1: Обновите Prisma Client

Выполните в терминале:

```bash
cd server
npm run prisma:generate
```

Эта команда обновит Prisma Client с учетом новой модели Wallet из schema.prisma.

### Шаг 2: Перезапустите сервер

После обновления Prisma Client перезапустите сервер:

```bash
# Остановите текущий сервер (Ctrl+C)
# Затем запустите снова:
npm run dev
```

### Шаг 3: Проверьте логи сервера

После перезапуска попробуйте загрузить кошелек снова. В консоли сервера должны появиться логи:
- `[getWallet] Запрос на получение кошелька для пользователя: ...`
- `[getWallet] Пользователь найден, ID: ...`
- `[getWallet] Кошелек найден/создан`

Если ошибка сохраняется, проверьте логи сервера - там будет детальная информация об ошибке.

## Альтернативное решение

Если команда `npm run prisma:generate` не работает, попробуйте:

```bash
cd server
npx prisma generate
```

Или если npx недоступен:

```bash
cd server
node_modules/.bin/prisma generate
```

## Проверка

После выполнения этих шагов кошелек должен загружаться без ошибок. Если проблема сохраняется, проверьте:

1. Что таблица `wallets` существует в базе данных
2. Что миграция применена (см. `server/prisma/migrations/`)
3. Логи сервера для детальной информации об ошибке


